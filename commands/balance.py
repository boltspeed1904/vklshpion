from vkbottle.api.keyboard import keyboard_gen
from vkbottle import Message, VKError
from vbml import Patcher, Pattern
from random import randrange
from Models.TortoiseModels import Users
from vkbottle.bot import Blueprint
from .Register import Register, OnlyMe, FromMe
from asyncio import sleep
bp=Blueprint()
@bp.on.message_handler(Register(), text=["–ë–∞–ª–∞–Ω—Å", "–±–∞–ª–∞–Ω—Å", "–ë–∞–ª–∞–Ω—Å üí∏", "@bot_agent_007 –ë–∞–ª–∞–Ω—Å üí∏"], lower=True)
async def balance(ans: Message):
	lal = await Users.get(user_id=ans.from_id)
	name_buttons = [[{'text': '–ü–æ–ø–æ–ª–Ω–∏—Ç—å üí∂', 'color': 'positive'}]]
	name_keyboard = keyboard_gen(name_buttons, one_time=False, inline=True)
	await ans(f"üí∏ –í–∞—à –±–∞–ª–∞–Ω—Å: {lal.balance:,} —Ä—É–±", keyboard=name_keyboard)

@bp.on.message_handler(Register(), text=["–ü–æ–ø–æ–ª–Ω–∏—Ç—å", "–ø–æ–ø–æ–ª–Ω–∏—Ç—å", "–ü–æ–ø–æ–ª–Ω–∏—Ç—å üí∂", "@bot_agent_007 –ü–æ–ø–æ–ª–Ω–∏—Ç—å üí∂"], lower=True)
async def wrapper(ans: Message):
	return """
üí∂ –î–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ: vk.cc/aCP4SO
‚ôª –ö–æ–º–∏—Å—Å–∏—è: 5%
üìô –ï—Å–ª–∏ –í—ã —É–∂–µ –æ–ø–ª–∞—Ç–∏–ª–∏, —Ç–æ –≤–≤–µ–¥–∏—Ç–µ <<–û–ø–ª–∞—Ç–∏—Ç—å>>. –ß—Ç–æ–±—ã –ø–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, –∞ –∏–º–µ–Ω–Ω–æ:
·Ö†·Ö†·Ö†üèÜ –í–∞–∂–Ω—ã–µ –¥—Ä—É–∑—å—è
·Ö†·Ö†·Ö†üíå –ö–æ–≥–æ –ª–∞–π–∫–∞–µ—Ç
·Ö†·Ö†·Ö†üë• –°–∫—Ä—ã—Ç—ã–µ –¥—Ä—É–∑—å—è
‚ö† –ï—Å–ª–∏ –í—ã –ø–æ–¥–∞–ª–∏ –ª–æ–∂–Ω—É—é –∑–∞—è–≤–∫—É, —Ç–æ –∑–∞ —ç—Ç–æ –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –±–∞–Ω.
"""

@bp.on.message_handler(Register(), text=["–ö–Ω–æ–ø–∫–∏ –≤–∫–ª", "–∫–Ω–æ–ø–∫–∏ –≤–∫–ª"], lower=True)
async def keyboard(ans: Message):
	name_buttons = [[{'text': '–ë–∞–ª–∞–Ω—Å üí∞'},
					{'text': '–ü–æ–ø–æ–ª–Ω–∏—Ç—å üí∂', 'color': 'positive'}]]
	name_keyboard = keyboard_gen(name_buttons, one_time=False)
	await ans("‚úÖ –ö–Ω–æ–ø–∫–∏ –≤–∫–ª—é—á–µ–Ω—ã!", keyboard=name_keyboard)

@bp.on.message_handler(Register(), text=["–ö–Ω–æ–ø–∫–∏ –≤—ã–∫–ª", "–∫–Ω–æ–ø–∫–∏ –≤—ã–∫–ª"], lower=True)
async def keyboard_off(ans: Message):
	await ans("‚ùé –ö–Ω–æ–ø–∫–∏ –≤—ã–∫–ª—é—á–µ–Ω—ã!", keyboard=keyboard_gen([]))

@bp.on.message_handler(Register(), text=["–ü–æ–º–æ—â—å", "–ø–æ–º–æ—â—å"], lower=True)
async def wrapper(ans: Message):
	await ans('–í—Å–µ –º–æ–∏ –∫–æ–º–∞–Ω–¥—ã:\n ·Ö†‚öô >> –£—Å–ª—É–≥–∏ - –í—Å–µ —É—Å–ª—É–≥–∏ –±–æ—Ç–∞.\n·Ö†üìï ¬ª –ü—Ä–æ—Ñ–∏–ª—å - –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤–æ–π ID –ø—Ä–æ—Ñ–∏–ª—è.\n·Ö†‚ôª ¬ª –û–±–Ω–æ–≤–∏—Ç—å - –û–±–Ω–æ–≤–∏—Ç—å —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞.\n·Ö†üí∂ ¬ª –ü–æ–ø–æ–ª–Ω–∏—Ç—å - –ü–æ–ø–æ–ª–Ω–∏—Ç—å —Å–≤–æ–π –±–∞–ª–∞–Ω—Å.\n·Ö†üí∏ ¬ª –ë–∞–ª–∞–Ω—Å - –£–∑–Ω–∞—Ç—å —Å–≤–æ–π –±–∞–ª–∞–Ω—Å.\n·Ö†üí≥ >> –û–ø–ª–∞—Ç–∏—Ç—å - –ü–æ–ª—É—á–∏—Ç—å –¥–æ–ø.–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ.\n·Ö†‚úÖ ¬ª –ö–Ω–æ–ø–∫–∏ [–≤–∫–ª/–≤—ã–∫–ª] - –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∫–Ω–æ–ø–∫–∏.\n·Ö†üîé ¬ª –ò–Ω—Ñ–æ [—Å—Å—ã–ª–∫–∞] - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.') 

@bp.on.message_handler(Register(), text=["–ü—Ä–∏–≤–µ—Ç", "–ø—Ä–∏–≤–µ—Ç", "–ù–∞—á–∞—Ç—å", "–Ω–∞—á–∞—Ç—å"], lower=True)
async def wrapper(ans: Message):
	return """
–ë–æ—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ñ–∏–ª–µ –í–∫–æ–Ω—Ç–∞–∫—Ç–µ ü§ñ
–ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

·Ö†‚öô >> –£—Å–ª—É–≥–∏
·Ö†üîé >> –ò–Ω—Ñ–æ [—Å—Å—ã–ª–∫–∞]
·Ö†üí∏ >> –ë–∞–ª–∞–Ω—Å
·Ö†üí∂ >> –ü–æ–ø–æ–ª–Ω–∏—Ç—å

·Ö†‚ö† –ï—Å–ª–∏ –í–∞–º –±–æ—Ç –ø–µ—Ä–µ—Å—Ç–∞–ª –æ—Ç–≤–µ—á–∞—Ç—å, —Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ "–û–±–Ω–æ–≤–∏—Ç—å", —á—Ç–æ–±—ã —Å–±—Ä–æ—Å–∏—Ç—å —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞

–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞, –í—ã –º–æ–∂–µ—Ç–µ –≤–∫–ª—é—á–∏—Ç—å –∫–Ω–æ–ø–∫–∏ –∫–æ–º–∞–Ω–¥–æ–π: <<–ö–Ω–æ–ø–∫–∏ –≤–∫–ª>>.
–í—Å–µ –∫–æ–º–∞–Ω–¥—ã –ë–æ—Ç–∞ –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –ø–æ –∫–æ–º–∞–Ω–¥–µ <<–ü–æ–º–æ—â—å>>.
""" 
@bp.on.message_handler(Register(), text=['–û–ø–ª–∞—Ç–∞', '–û–ø–ª–∞—Ç–∏—Ç—å', '–û–ø–ª–∞—Ç–∏—Ç—å üí≥'], lower=True)
async def monsend(ans):
	lal = await Users.get(user_id=ans.from_id)
	if lal.balance < 70:
		return f'''
üö´ –£ –≤–∞—Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ!
üí∏ –í–∞—à –±–∞–ª–∞–Ω—Å: {lal.balance:,} —Ä—É–±.
üí∂ –î–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ: vk.cc/aCP4SO
‚ö† –ü–µ—Ä–µ–¥ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ–π ID –ø—Ä–æ—Ñ–∏–ª—è –≤ –±–æ—Ç–µ. –£–∑–Ω–∞—Ç—å —Å–≤–æ–π ID –ø—Ä–æ—Ñ–∏–ª—è, –º–æ–∂–Ω–æ –ø–æ –∫–æ–º–∞–Ω–¥–µ <<–ü—Ä–æ—Ñ–∏–ª—å>>.
'''
	await lal.update_from_dict({'balance': lal.balance-70})
	await lal.save()
	return f'''
‚úÖ –í—ã —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –∑–∞—è–≤–∫—É –Ω–∞  –ø—Ä–æ—Å–º–æ—Ç—Ä –°–∫—Ä—ã—Ç—ã—Ö –¥—Ä—É–∑–µ–π.
‚ö† –ö–∞–∂–¥–∞—è –∑–∞—è–≤–∫–∞ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é, –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –¥–æ 2-—Ö —Å—É—Ç–æ–∫.
üí≥ –°–ø–∏—Å–∞–Ω–æ —Å –±–∞–ª–∞–Ω—Å–∞: 70 —Ä—É–±.
üí∏ –í–∞—à –±–∞–ª–∞–Ω—Å: {lal.balance} —Ä—É–±.
'''
@bp.on.message_handler(FromMe(), text="–ü—Ä–æ–≤–µ—Ä–∫–∞", lower=True)
async def wrapper(ans: Message):
	await ans("‚ò¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—à–ª–∞ —É–¥–∞—á–Ω–æ!\n‚öô –í—ã —è–≤–ª—è–µ—Ç–µ—Å—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º –±–æ—Ç–∞.")